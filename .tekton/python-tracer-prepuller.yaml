apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: python-tracer-prepuller
spec:
  selector:
    matchLabels:
      name: python-tracer-prepuller
  template:
    metadata:
      labels:
        name: python-tracer-prepuller
    spec:
      # Configure an init container for each image you want to pull
      initContainers:
        - name: prepuller-git
          image: public.ecr.aws/docker/library/alpine:latest
          command: ["sh", "-c", "'true'"]
        - name: prepuller-google-cloud-pubsub
          image: quay.io/thekevjames/gcloud-pubsub-emulator:501.0.0
          command: ["sh", "-c", "'true'"]
        - name: prepuller-cassandra
          image: public.ecr.aws/docker/library/cassandra:3.11.16-jammy
          command: ["sh", "-c", "'true'"]
        - name: prepuller-rabbitmq
          image: public.ecr.aws/docker/library/rabbitmq:3.13.0
          command: ["sh", "-c", "'true'"]
        - name: prepuller-redis
          image: public.ecr.aws/docker/library/redis:7.2.4-bookworm
          command: ["sh", "-c", "'true'"]
        - name: prepuller-mongo
          image: public.ecr.aws/docker/library/mongo:7.0.6
          command: ["sh", "-c", "'true'"]
        - name: prepuller-mariadb
          image: public.ecr.aws/docker/library/mariadb:11.3.2
          command: ["sh", "-c", "'true'"]
        - name: prepuller-postgres
          image: public.ecr.aws/docker/library/postgres:16.2-bookworm
          command: ["sh", "-c", "'true'"]
        - name: prepuller-kafka
          image: public.ecr.aws/bitnami/kafka:3.9.0
          command: ["sh", "-c", "'true'"]
        - name: prepuller-39
          image: public.ecr.aws/docker/library/python:3.9-bookworm
          command: ["sh", "-c", "'true'"]
        - name: prepuller-310
          image: public.ecr.aws/docker/library/python:3.10-bookworm
          command: ["sh", "-c", "'true'"]
        - name: prepuller-311
          image: public.ecr.aws/docker/library/python:3.11-bookworm
          command: ["sh", "-c", "'true'"]
        - name: prepuller-312
          image: public.ecr.aws/docker/library/python:3.12-bookworm
          command: ["sh", "-c", "'true'"]
        - name: prepuller-313
          image: public.ecr.aws/docker/library/python:3.13-bookworm
          command: ["sh", "-c", "'true'"]
        - name: prepuller-314
          image: public.ecr.aws/docker/library/python:3.14-bookworm
          command: ["sh", "-c", "'true'"]

      # Use the pause container to ensure the Pod goes into a `Running` phase
      # but doesn't take up resource on the cluster
      containers:
        - name: pause
          image: gcr.io/google_containers/pause:3.2
          resources:
            limits:
              cpu: 1m
              memory: 8Mi
            requests:
              cpu: 1m
              memory: 8Mi
